<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>schema.spec.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Schema 1.0.2-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema</span></div></div></li><li class="depth-2 branch"><a href="schema.coerce.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coerce</span></div></a></li><li class="depth-2 branch"><a href="schema.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>experimental</span></div></div></li><li class="depth-3 branch"><a href="schema.experimental.abstract-map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>abstract-map</span></div></a></li><li class="depth-3 branch"><a href="schema.experimental.complete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>complete</span></div></a></li><li class="depth-3"><a href="schema.experimental.generators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>generators</span></div></a></li><li class="depth-2 branch"><a href="schema.macros.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-2 branch"><a href="schema.potemkin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>potemkin</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spec</span></div></div></li><li class="depth-3 branch"><a href="schema.spec.collection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>collection</span></div></a></li><li class="depth-3 branch current"><a href="schema.spec.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="schema.spec.leaf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>leaf</span></div></a></li><li class="depth-3"><a href="schema.spec.variant.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>variant</span></div></a></li><li class="depth-2 branch"><a href="schema.test.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-2"><a href="schema.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="schema.spec.core.html#var-.2Bno-precondition.2B"><div class="inner"><span>+no-precondition+</span></div></a></li><li class="depth-1"><a href="schema.spec.core.html#var-CoreSpec"><div class="inner"><span>CoreSpec</span></div></a></li><li class="depth-2 branch"><a href="schema.spec.core.html#var-checker"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>checker</span></div></a></li><li class="depth-2"><a href="schema.spec.core.html#var-subschemas"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>subschemas</span></div></a></li><li class="depth-1"><a href="schema.spec.core.html#var-precondition"><div class="inner"><span>precondition</span></div></a></li><li class="depth-1"><a href="schema.spec.core.html#var-run-checker"><div class="inner"><span>run-checker</span></div></a></li><li class="depth-1"><a href="schema.spec.core.html#var-simple-precondition"><div class="inner"><span>simple-precondition</span></div></a></li><li class="depth-1"><a href="schema.spec.core.html#var-sub-checker"><div class="inner"><span>sub-checker</span></div></a></li><li class="depth-1"><a href="schema.spec.core.html#var-with-cache"><div class="inner"><span>with-cache</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">schema.spec.core</h2><div class="doc"><pre class="plaintext">Protocol and preliminaries for Schema &apos;specs&apos;, which are a common language
for schemas to use to express their structure.</pre></div><div class="public anchor" id="var-.2Bno-precondition.2B"><h3>+no-precondition+</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/estsauver/schema/blob/master/src/cljx/schema/spec/core.cljx#L43">view source</a></div></div><div class="public anchor" id="var-CoreSpec"><h3>CoreSpec</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Specs are a common language for Schemas to express their structure.
These two use-cases aren&apos;t priveledged, just the two that are considered core
to being a Spec.</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-checker"><h3>checker</h3><div class="usage"><code>(checker this params)</code></div><div class="doc"><pre class="plaintext">Create a function that takes [data], and either returns a walked version of data
(by default, usually just data), or a utils/ErrorContainer containing value that looks
like the &apos;bad&apos; parts of data with ValidationErrors at the leaves describing the failures.

params are: subschema-checker, return-walked?, and cache.

params is a map specifying:
 - subschema-checker - a function for checking subschemas
 - returned-walked? - a boolean specifying whether to return a walked version of the data
   (otherwise, nil is returned which increases performance)
 - cache - a map structure from schema to checker, which speeds up checker creation
   when the same subschema appears multiple times, and also facilitates handling
   recursive schemas.</pre></div></div><div class="public anchor" id="var-subschemas"><h3>subschemas</h3><div class="usage"><code>(subschemas this)</code></div><div class="doc"><pre class="plaintext">List all subschemas
</pre></div></div></div></div><div class="src-link"><a href="http://github.com/estsauver/schema/blob/master/src/cljx/schema/spec/core.cljx#L12">view source</a></div></div><div class="public anchor" id="var-precondition"><h3>precondition</h3><div class="usage"><code>(precondition s p err-f)</code></div><div class="doc"><pre class="plaintext">Helper for making preconditions.
Takes a schema, predicate p, and error function err-f.
If the datum passes the predicate, returns nil.
Otherwise, returns a validation error with description (err-f datum-description),
where datum-description is a (short) printable standin for the datum.</pre></div><div class="src-link"><a href="http://github.com/estsauver/schema/blob/master/src/cljx/schema/spec/core.cljx#L45">view source</a></div></div><div class="public anchor" id="var-run-checker"><h3>run-checker</h3><div class="usage"><code>(run-checker f return-walked? s)</code></div><div class="doc"><pre class="plaintext">A helper to start a checking run, by setting the appropriate params.
For examples, see schema.core/checker or schema.coerce/coercer.</pre></div><div class="src-link"><a href="http://github.com/estsauver/schema/blob/master/src/cljx/schema/spec/core.cljx#L65">view source</a></div></div><div class="public anchor" id="var-simple-precondition"><h3>simple-precondition</h3><h4 class="type">macro</h4><div class="usage"><code>(simple-precondition s f-sym)</code></div><div class="doc"><pre class="plaintext">A simple precondition where f-sym names a predicate (e.g. (simple-precondition s map?))
</pre></div><div class="src-link"><a href="http://github.com/estsauver/schema/blob/master/src/cljx/schema/spec/core.cljx#L56">view source</a></div></div><div class="public anchor" id="var-sub-checker"><h3>sub-checker</h3><div class="usage"><code>(sub-checker {:keys [schema error-wrap]} {:keys [subschema-checker cache], :as params})</code></div><div class="doc"><pre class="plaintext">Should be called recursively on each subschema in the &apos;checker&apos; method of a spec.
Handles caching and error wrapping behavior.</pre></div><div class="src-link"><a href="http://github.com/estsauver/schema/blob/master/src/cljx/schema/spec/core.cljx#L85">view source</a></div></div><div class="public anchor" id="var-with-cache"><h3>with-cache</h3><div class="usage"><code>(with-cache cache cache-key wrap-recursive-delay result-fn)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/estsauver/schema/blob/master/src/cljx/schema/spec/core.cljx#L75">view source</a></div></div></div></body></html>